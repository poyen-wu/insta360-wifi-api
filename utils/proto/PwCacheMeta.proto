syntax = "proto3";

package bmg;

message PwTimestampRange {
    int64 start = 1;
    int64 end = 2;
}

message PwRational {
    int32 num = 1;
    int32 den = 2;
}

message PwDashFragmentMeta {
    string file_cache_meta = 1;
    repeated PwTimestampRange cached_dts_ranges = 2;
    PwTimestampRange file_dts_range = 3;
    PwRational time_base = 4;
    int64 file_dts_offset = 5;
}

message PwDashStreamMeta {
    bytes init_section_data = 1;
    map<int32, PwDashFragmentMeta> fragment_cache_metas = 2;
}

message PwDashCacheMeta {
    string mpd_content = 1;
    map<int32, PwDashStreamMeta> video_metas = 2;
    map<int32, PwDashStreamMeta> audio_metas = 3;
}

message PwMp4CacheMeta {
    string file_cache_meta = 1;
    PwTimestampRange vstream_dts_range = 2;
    PwTimestampRange astream_dts_range = 3;
    repeated PwTimestampRange cached_vdts_ranges = 4;
    repeated PwTimestampRange cached_adts_ranges = 5;
    PwRational vtime_base = 6;
    PwRational atime_base = 7;
    int64 vstream_dts_offset = 8;
    int64 astream_dts_offset = 9;
}
